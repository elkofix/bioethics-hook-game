(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3010:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(5155),s=a(2115),o=a(3034);let l=e=>{let{isGameStarted:t,isLoading:a,onToggle:s}=e;return(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl border border-gray-700 w-full max-w-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"text-white mr-4",children:"Estado del Juego:"}),(0,r.jsx)("span",{className:"px-3 py-1 rounded-full font-semibold text-sm ".concat(t?"bg-green-500 text-green-900":"bg-red-500 text-red-900"),children:t?"ACTIVO":"INACTIVO"})]}),(0,r.jsx)("button",{onClick:s,disabled:a,className:"w-full py-3 px-6 rounded-lg font-bold text-white transition-colors ".concat(t?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"," disabled:opacity-50 disabled:cursor-not-allowed"),children:a?"Actualizando...":t?"Detener Juego":"Iniciar Juego"}),(0,r.jsx)("div",{className:"mt-4 text-sm text-gray-400 text-center",children:t?"Los jugadores pueden ver el bot\xf3n de finalizar.":"El bot\xf3n de finalizar est\xe1 oculto para los jugadores."})]})},n=()=>{let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{n(!0),t(await (0,o.c8)()),n(!1)})()},[]);let d=async()=>{n(!0);let a=!e;try{await (0,o.es)(a),t(a)}catch(e){console.error("No se pudo actualizar el estado del juego.",e)}finally{n(!1)}};return a&&!e&&!1===e?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Cargando Panel de Control..."})}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 p-4",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Panel de Control del Juego"}),(0,r.jsx)("p",{className:"text-gray-400 mt-2",children:"Controla el estado global del juego para todos los jugadores."})]}),(0,r.jsx)(l,{isGameStarted:e,isLoading:a,onToggle:d}),(0,r.jsx)("div",{className:"mt-8 text-gray-400 text-sm text-center max-w-sm",children:(0,r.jsx)("p",{children:"Al cambiar el estado aqu\xed, se actualizar\xe1 en tiempo real para todos los usuarios conectados a la simulaci\xf3n."})})]})}},3034:(e,t,a)=>{"use strict";a.d(t,{XO:()=>g,c8:()=>c,rq:()=>n,QM:()=>u,vr:()=>d,es:()=>i});var r=a(2078),s=a(9708);let o=(0,r.Wp)({apiKey:"AIzaSyA8C0WtNC6-Al_GZsU93rP_0YBRDdLMTdQ",authDomain:"bioethics-149f8.firebaseapp.com",projectId:"bioethics-149f8",storageBucket:"bioethics-149f8.firebasestorage.app",messagingSenderId:"213674127804",appId:"1:213674127804:web:660b963a96984f0f18fbb9"}),l=(0,s.aU)(o),n=async e=>{try{await (0,s.gS)((0,s.rJ)(l,"game_results"),{outcome:e}),console.log("Resultado '".concat(e,"' registrado."))}catch(e){console.error("Error registrando resultado:",e)}},d=e=>{let t=(0,s.H9)((0,s.rJ)(l,"game_state"),"status");return(0,s.aQ)(t,t=>{t.exists()&&e(t.data())})},c=async()=>{try{let e=(0,s.H9)((0,s.rJ)(l,"game_state"),"status"),t=await (0,s.x7)(e);if(t.exists())return t.data().isStarted;return console.warn("Documento de estado no encontrado, devolviendo 'false'."),!1}catch(e){return console.error("Error obteniendo el estado del juego:",e),!1}},i=async e=>{try{let t=(0,s.H9)((0,s.rJ)(l,"game_state"),"status");await (0,s.mZ)(t,{isStarted:e})}catch(e){throw console.error("Error actualizando el estado del juego:",e),e}},u=e=>{let t=(0,s.P)((0,s.rJ)(l,"game_results"));return(0,s.aQ)(t,t=>{let a=[];t.forEach(e=>{a.push({id:e.id,...e.data()})}),e(a)})},g=async()=>{try{let e=(0,s.rJ)(l,"game_results"),t=await (0,s.GG)(e);if(t.empty)return void console.log("No hay resultados que eliminar.");let a=(0,s.wP)(l);t.forEach(e=>{a.delete(e.ref)}),await a.commit()}catch(e){throw console.error("Error eliminando todos los resultados:",e),e}}},5853:(e,t,a)=>{Promise.resolve().then(a.bind(a,3010))}},e=>{e.O(0,[135,736,441,255,358],()=>e(e.s=5853)),_N_E=e.O()}]);