(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{2630:(e,s,t)=>{Promise.resolve().then(t.bind(t,6244))},3034:(e,s,t)=>{"use strict";t.d(s,{XO:()=>m,c8:()=>n,rq:()=>i,QM:()=>x,vr:()=>o,es:()=>c});var r=t(2078),a=t(9708);let l=(0,r.Wp)({apiKey:"AIzaSyA8C0WtNC6-Al_GZsU93rP_0YBRDdLMTdQ",authDomain:"bioethics-149f8.firebaseapp.com",projectId:"bioethics-149f8",storageBucket:"bioethics-149f8.firebasestorage.app",messagingSenderId:"213674127804",appId:"1:213674127804:web:660b963a96984f0f18fbb9"}),d=(0,a.aU)(l),i=async e=>{try{await (0,a.gS)((0,a.rJ)(d,"game_results"),{outcome:e}),console.log("Resultado '".concat(e,"' registrado."))}catch(e){console.error("Error registrando resultado:",e)}},o=e=>{let s=(0,a.H9)((0,a.rJ)(d,"game_state"),"status");return(0,a.aQ)(s,s=>{s.exists()&&e(s.data())})},n=async()=>{try{let e=(0,a.H9)((0,a.rJ)(d,"game_state"),"status"),s=await (0,a.x7)(e);if(s.exists())return s.data().isStarted;return console.warn("Documento de estado no encontrado, devolviendo 'false'."),!1}catch(e){return console.error("Error obteniendo el estado del juego:",e),!1}},c=async e=>{try{let s=(0,a.H9)((0,a.rJ)(d,"game_state"),"status");await (0,a.mZ)(s,{isStarted:e})}catch(e){throw console.error("Error actualizando el estado del juego:",e),e}},x=e=>{let s=(0,a.P)((0,a.rJ)(d,"game_results"));return(0,a.aQ)(s,s=>{let t=[];s.forEach(e=>{t.push({id:e.id,...e.data()})}),e(t)})},m=async()=>{try{let e=(0,a.rJ)(d,"game_results"),s=await (0,a.GG)(e);if(s.empty)return void console.log("No hay resultados que eliminar.");let t=(0,a.wP)(d);s.forEach(e=>{t.delete(e.ref)}),await t.commit()}catch(e){throw console.error("Error eliminando todos los resultados:",e),e}}},6244:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(5155),a=t(2115),l=t(3034);let d=e=>{let{total:s,wins:t,losses:a}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:s}),(0,r.jsx)("div",{className:"text-gray-400",children:"Total"})]}),(0,r.jsxs)("div",{className:"bg-green-800 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:t}),(0,r.jsx)("div",{className:"text-green-200",children:"Victorias"})]}),(0,r.jsxs)("div",{className:"bg-red-800 p-4 rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-white",children:a}),(0,r.jsx)("div",{className:"text-red-200",children:"Derrotas"})]})]})},i=e=>{let{wins:s,losses:t}=e,a=s+t;return(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 text-center",children:"Distribuci\xf3n de Resultados"}),(0,r.jsxs)("div",{className:"flex items-end justify-center space-x-12 h-48",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center h-full",children:[(0,r.jsx)("div",{className:"flex-1 flex items-end w-16",children:(0,r.jsx)("div",{className:"bg-green-500 w-full rounded-t transition-all",style:{height:a>0?"".concat(s/a*100,"%"):"5%"}})}),(0,r.jsx)("div",{className:"text-white mt-2",children:"Victorias"}),(0,r.jsx)("div",{className:"text-green-400 font-bold",children:s})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center h-full",children:[(0,r.jsx)("div",{className:"flex-1 flex items-end w-16",children:(0,r.jsx)("div",{className:"bg-red-500 w-full rounded-t transition-all",style:{height:a>0?"".concat(t/a*100,"%"):"5%"}})}),(0,r.jsx)("div",{className:"text-white mt-2",children:"Derrotas"}),(0,r.jsx)("div",{className:"text-red-400 font-bold",children:t})]})]})]})},o=e=>{let{results:s}=e;return(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Detalles de Resultados"}),0===s.length?(0,r.jsx)("p",{className:"text-gray-400 text-center py-4",children:"No hay resultados registrados"}):(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:s.map(e=>(0,r.jsx)("div",{className:"p-3 rounded font-bold ".concat("win"===e.outcome?"bg-green-900 text-green-300":"bg-red-900 text-red-300"),children:"win"===e.outcome?"VICTORIA":"DERROTA"},e.id))})]})},n=()=>{let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(!0),[c,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=(0,l.QM)(e=>{s(e),n(!1)});return()=>e()},[]);let m=async()=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar todos los resultados? Esta acci\xf3n no se puede deshacer.")){x(!0);try{await (0,l.XO)()}catch(e){alert("Error al eliminar los resultados.")}finally{x(!1)}}},h=(0,a.useMemo)(()=>({wins:e.filter(e=>"win"===e.outcome).length,losses:e.filter(e=>"lose"===e.outcome).length,total:e.length}),[e]);return t?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:(0,r.jsx)("div",{className:"text-white text-xl",children:"Cargando resultados..."})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 p-4 md:p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Dashboard de Resultados"}),(0,r.jsx)(d,{total:h.total,wins:h.wins,losses:h.losses}),(0,r.jsx)("div",{className:"mb-6 text-center",children:(0,r.jsx)("button",{onClick:m,disabled:c||0===h.total,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Eliminando...":"Limpiar Todos los Resultados"})}),(0,r.jsx)(i,{wins:h.wins,losses:h.losses}),(0,r.jsx)(o,{results:e})]})})}}},e=>{e.O(0,[135,736,441,255,358],()=>e(e.s=2630)),_N_E=e.O()}]);